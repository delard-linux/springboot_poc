<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/extras/spring-security" lang="en">
<head th:replace="layout/layout :: head"></head>
<body>

    <div id="i18n_eliminar" th:text="#{text.global.msg.eliminarOk}" style="display: none;"></div>

	<header th:replace="layout/layout :: header"></header>



	<div class="container-md">

	<div class="card bg-light mt-1">
			<div class="card-body">

				<form th:action="@{/buscar}" method="get"  th:object="${cl_search_crit}">

					<div class="py-1 row">
						<div class="col-3 col-md-3">
							<h6 th:text="#{text.cliente.nombre}"></h6>
							<input class="form-control" type="text" id="nombreFilter" th:field="*{nombreFilter}">
						</div>
						<div class="col-3 col-md-3">
							<h6 th:text="#{text.cliente.apellido}"></h6>
							<input class="form-control" type="text" id="apellidoFilter" th:field="*{apellidoFilter}">
						</div>
						<div class="col-3 col-md-3">
							<h6 th:text="#{text.cliente.email}"></h6>
							<input class="form-control" type="text" id="emailFilter" th:field="*{emailFilter}">
						</div>
						<div class="col-1 col-md-3">

							<div class="container">
								<div class="row align-content-end justify-content-end">
									<div class="col-3">
										<input type="submit" 
											class="btn btn-outline-primary btn-sm" 
											th:value="#{text.global.accion.buscar}">
									</div>
								</div>
							</div>

						</div>
					</div>

				</form>

			</div>
		</div>

		<div class="card bg-light mt-1">
			<div class="card-header" th:text="${titulo}"></div>
			<div class="card-body">

				<div class="py-1 form-group row" sec:authorize="hasRole('ROLE_ADMIN')">
					<div class="col">
					</div>
				</div>
				
				
				<div class="py-2 form-group row justify-content-between">
						<div class="col-2">
							<a sec:authorize="hasRole('ROLE_ADMIN')" 
								class="btn btn-outline-primary btn-sm" 
								th:href="@{/form}" th:text="#{text.global.accion.cliente.crear}"></a>
						</div>
						<div class="col-2">
							<a class="btn btn-outline-success btn-sm float-right mx-2" th:href="@{'/listar'(format=csv)}">CSV</a>
							<a class="btn btn-outline-info btn-sm float-right mx-2" th:href="@{'/listar'(format=xml)}" target="_blank">XML</a>
							<a class="btn btn-outline-warning btn-sm float-right" th:href="@{'/listar'(format=json)}" target="_blank">JSON</a>
						</div>
					</div>
				
				

				<div class="py-1 form-group row">
					<div class="col">
						<nav th:replace="paginador-nav :: paginador"></nav>
						<table class="table table-bordered align-middle">
							<caption></caption>
							<thead>
								<tr class="align-middle">
									<th scope="col" sec:authorize="hasRole('ROLE_USER')"></th>
									<th scope="col" th:text="#{text.cliente.nombre}"></th>
									<th scope="col" th:text="#{text.cliente.apellido}"></th>
									<th scope="col" th:text="#{text.cliente.email}"></th>
									<th scope="col" th:text="#{text.cliente.bornDate}"></th>
									<th scope="col" th:text="#{text.cliente.createAt}"></th>
									<th scope="col" sec:authorize="hasRole('ROLE_ADMIN')"></th>
									<th scope="col" sec:authorize="hasRole('ROLE_ADMIN')"></th>
									<th scope="col" sec:authorize="hasRole('ROLE_ADMIN')"></th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="cl : ${clientedtolist}">
									<td sec:authorize="hasRole('ROLE_USER')">
										<a class="btn btn-outline-primary btn-sm" th:href="@{/ver/} + ${cl.id}" th:text="#{text.global.accion.ver}"></a>
									</td>
									<td th:text="${cl.nombre}"></td>
									<td th:text="${cl.apellido}"></td>
									<td th:text="${cl.email}"></td>
									<td th:text="${cl.bornAt}"></td>
									<td th:text="${cl.createAt}"></td>
									<td sec:authorize="hasRole('ROLE_ADMIN')"><a class="btn btn-outline-primary btn-sm"
										th:href="@{/form/} + ${cl.id}" th:text="#{text.global.accion.editar}"></a></td>
									<td sec:authorize="hasRole('ROLE_ADMIN')"><a class="btn btn-outline-danger btn-sm"
										th:href="@{/eliminar/} + ${cl.id}"
										onclick="return confirm(document.getElementById('i18n_eliminar').innerHTML);" 
										th:text="#{text.global.accion.eliminar}"></a></td>
									<td sec:authorize="hasRole('ROLE_ADMIN')"><a class="btn btn-outline-primary btn-sm"
										th:href="@{/factura/form/} + ${cl.id}" th:text="#{text.global.accion.factura.crear}"></a></td>
								</tr>
							</tbody>
						</table>
						
						<nav th:replace="paginador-nav :: paginador"></nav>
												
					</div>
				</div>
			</div>
		</div>

	</div>

	<footer th:replace="layout/layout :: footer"></footer>

</body>
</html>